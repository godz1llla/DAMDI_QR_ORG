# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –≤—Ö–æ–¥–∞ –∞–¥–º–∏–Ω-–∞–∫–∫–∞—É–Ω—Ç–æ–≤

## üêõ –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–≤–µ–¥–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –≤—Ö–æ–¥–æ–º –≤ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∞–¥–º–∏–Ω-–∞–∫–∫–∞—É–Ω—Ç.

## üîç –ü—Ä–∏—á–∏–Ω–∞
–û—à–∏–±–∫–∞ –≤ –ª–æ–≥–∏–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–≤–µ–¥–µ–Ω–∏—è - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞.

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω API —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–≤–µ–¥–µ–Ω–∏—è
**–§–∞–π–ª:** `api/restaurants/create.php`

**–ë—ã–ª–æ:**
1. –°–æ–∑–¥–∞–≤–∞–ª—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–µ–∑ `restaurant_id`
2. –°–æ–∑–¥–∞–≤–∞–ª—Å—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω —Å `owner_id`
3. –û–±–Ω–æ–≤–ª—è–ª—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å `restaurant_id`

**–°—Ç–∞–ª–æ:**
1. –°–æ–∑–¥–∞—ë—Ç—Å—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω –±–µ–∑ `owner_id`
2. –°–æ–∑–¥–∞—ë—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å `restaurant_id`
3. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω —Å `owner_id`

### 2. –°–∫—Ä–∏–ø—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
**–§–∞–π–ª:** `fix-admin-accounts.sql`

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π:

```bash
mysql -u root -p damdi_qr < fix-admin-accounts.sql
```

## üéØ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –¢–µ—Å—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è
1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –∑–∞–≤–µ–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ –≤ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∞–¥–º–∏–Ω-–∞–∫–∫–∞—É–Ω—Ç
4. ‚úÖ –í—Ö–æ–¥ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å

### –¢–µ—Å—Ç 2: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
   ```bash
   mysql -u root -p damdi_qr < fix-admin-accounts.sql
   ```
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∞–¥–º–∏–Ω-–∞–∫–∫–∞—É–Ω—Ç—ã
3. ‚úÖ –í—Ö–æ–¥ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```sql
SELECT u.id, u.email, u.role, u.restaurant_id, u.is_blocked,
       r.id as restaurant_exists, r.name, r.is_active as restaurant_active
FROM users u 
LEFT JOIN restaurants r ON u.restaurant_id = r.id 
WHERE u.role = 'ADMIN';
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
```sql
SELECT r.id, r.name, r.owner_id, r.is_active,
       u.id as owner_exists, u.email, u.role as owner_role
FROM restaurants r 
LEFT JOIN users u ON r.owner_id = u.id;
```

## üìù –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. **–õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–≤–µ–¥–µ–Ω–∏—è** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
2. **–°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ foreign keys
3. **–°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** - –≤—Å–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã –∞–∫—Ç–∏–≤–Ω—ã
4. **–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã orphaned –∑–∞–ø–∏—Å–∏

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω-–∞–∫–∫–∞—É–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—Å–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤

---

**–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞! üéâ**
