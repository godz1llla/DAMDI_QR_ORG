# üì¶ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –æ–Ω–ª–∞–π–Ω-–∑–∞–∫–∞–∑–∞ –∏ –¥–æ—Å—Ç–∞–≤–∫–∏

## üóÑÔ∏è –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

–ü—Ä–∏–º–µ–Ω–∏—Ç–µ SQL –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏:

```bash
mysql -u your_user -p damdi_qr < database/add-delivery-and-whatsapp.sql
```

–ò–ª–∏ —á–µ—Ä–µ–∑ MySQL –∫–ª–∏–µ–Ω—Ç:

```sql
USE damdi_qr;
SOURCE database/add-delivery-and-whatsapp.sql;
```

## ‚úÖ –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- ‚úÖ –ü–æ–ª–µ `whatsapp_number` –≤ —Ç–∞–±–ª–∏—Ü–µ `restaurants`
- ‚úÖ –ü–æ–ª—è `order_type`, `customer_phone`, `delivery_address` –≤ —Ç–∞–±–ª–∏—Ü–µ `orders`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ NULL –¥–ª—è `table_id` (–¥–ª—è –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É)

### 2. Backend:
- ‚úÖ –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ WhatsApp (`nodejs/src/utils/whatsapp.ts`)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–∫–∞–∑–æ–≤ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è WhatsApp –Ω–æ–º–µ—Ä–∞

### 3. Frontend:
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "–í —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ" / "–î–æ—Å—Ç–∞–≤–∫–∞" –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –º–µ–Ω—é
- ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∞–¥—Ä–µ—Å–æ–º –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ –ü–æ–ª–µ WhatsApp –Ω–æ–º–µ—Ä–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞

## üì± –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WhatsApp

### –í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (development):
–°–æ–æ–±—â–µ–Ω–∏—è –≤ WhatsApp –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞.

### –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:
–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

#### –í–∞—Ä–∏–∞–Ω—Ç 1: Twilio WhatsApp API
```env
TWILIO_ACCOUNT_SID=your_account_sid
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_WHATSAPP_FROM=whatsapp:+14155238886
```

–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –≤ `nodejs/src/utils/whatsapp.ts`.

#### –í–∞—Ä–∏–∞–Ω—Ç 2: Green API (–ø–æ–ø—É–ª—è—Ä–Ω—ã–π –≤ –°–ù–ì)
```env
GREEN_API_ID=your_api_id
GREEN_API_TOKEN=your_api_token
```

–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –≤ `nodejs/src/utils/whatsapp.ts`.

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

1. **–í–ª–∞–¥–µ–ª–µ—Ü —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞:**
   - –ó–∞—Ö–æ–¥–∏—Ç –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
   - –£–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ–π WhatsApp –Ω–æ–º–µ—Ä
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

2. **–ö–ª–∏–µ–Ω—Ç:**
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–µ–Ω—é
   - –í—ã–±–∏—Ä–∞–µ—Ç "–î–æ—Å—Ç–∞–≤–∫–∞" –∏–ª–∏ "–í —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ"
   - –î–æ–±–∞–≤–ª—è–µ—Ç –±–ª—é–¥–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É
   - –ü—Ä–∏ –¥–æ—Å—Ç–∞–≤–∫–µ –≤–≤–æ–¥–∏—Ç –∞–¥—Ä–µ—Å –∏ —Ç–µ–ª–µ—Ñ–æ–Ω
   - –û—Ñ–æ—Ä–º–ª—è–µ—Ç –∑–∞–∫–∞–∑

3. **–í–ª–∞–¥–µ–ª–µ—Ü –ø–æ–ª—É—á–∞–µ—Ç:**
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ WhatsApp —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–∞–∫–∞–∑–µ

## üìã –§–æ—Ä–º–∞—Ç WhatsApp —Å–æ–æ–±—â–µ–Ω–∏—è:

```
üì¶ –ù–û–í–´–ô –ó–ê–ö–ê–ó #123

üöö –î–û–°–¢–ê–í–ö–ê
üí∞ –°—É–º–º–∞: 3,380 ‚Ç∏
üïê 15.12.2024, 18:30

üìû –¢–µ–ª–µ—Ñ–æ–Ω: +7 777 123-45-67
üìç –ê–¥—Ä–µ—Å: —É–ª. –ê–±–∞—è, –¥. 150, –∫–≤. 42

–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞:
1. –ë—Ä—É—Å–∫–µ—Ç—Ç–∞ —Å —Ç–æ–º–∞—Ç–∞–º–∏ x2 = 700 ‚Ç∏
2. –°—Ç–µ–π–∫ –†–∏–±–∞–π x1 = 1,890 ‚Ç∏
3. –¶–µ–∑–∞—Ä—å —Å –∫—É—Ä–∏—Ü–µ–π x1 = 490 ‚Ç∏
4. –≠—Å–ø—Ä–µ—Å—Å–æ x2 = 300 ‚Ç∏

üíµ –ò—Ç–æ–≥–æ: 3,380 ‚Ç∏
```

